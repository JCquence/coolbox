/*!
 *	=============
 *	   CoolBox
 *	=============
 *
 *	Version: 0.1.0
 *	Date: 7th June, 2015 - 12:57 GMT+1
 *
 *	(c) 2009, 2015 Jelle van der Coelen.
 *	https://jellevandercoelen.com | jelle@jellevandercoelen.com
 *
 *	Distributed under the Creative Commons Attribution-Noncommercial-Share Alike 3.0 Netherlands
 *	https://creativecommons.org/licenses/by-nc-sa/3.0/nl/deed.en_US
 *
 *	-------------------------------------------------------
 *	Build for Jquery
 *	(c) 2005, 2015 jQuery Foundation, Inc. | https://jquery.org/license
 *	-------------------------------------------------------
 */
var cb={vars:{},helpers:{}};cb.vars.coolboxes=new Array,cb.vars.initialZIndex=9999,cb.vars.isImage=/(jpeg|jpg|gif|png)/i,cb.helpers.closure=function(a,b){return function(){b(a)}},cb.helpers.getActiveCoolBox=function(){return"undefined"!=typeof cb.vars.coolboxes[jQuery(".cb.cb-active").data("cb")]?cb.vars.coolboxes[jQuery(".cb.cb-active").data("cb")]:{kill:function(){},previous:function(){},next:function(){}}},cb.helpers.getProperty=function(a,b){for(var c,d={duration:["transitionDuration","WebkitTransitionDuration","MozTransitionDuration","msTransitionDuration","OTransitionDuration"]};c=d[b].shift();)if("undefined"!=typeof a.css(c))return a.css(c);return!1},cb.helpers.hideLoader=function(){$(".cb-loader").css({opacity:0}),setTimeout(function(){$(".cb-loader").css({zIndex:-1})},100)},cb.helpers.randStr=function(a){a||(a=15);for(var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=0;a>d;d++)b+=c.charAt(Math.floor(Math.random()*c.length));return b},jQuery(function(){jQuery(document).on("click",".cb",function(a){a.stopPropagation()}),jQuery("body").append('<div class="cb-overlay"></div>'),jQuery("body").append('<div class="cb-loader"></div>'),jQuery(document).keyup(function(a){27==a.keyCode&&cb.helpers.getActiveCoolBox().kill(),37==a.keyCode&&cb.helpers.getActiveCoolBox().previous(),39==a.keyCode&&cb.helpers.getActiveCoolBox().next()})});var CoolBox=function(a,b){function c(){return jQuery(".cb[data-cb="+w+"]")}function d(a){var b=a.height,c=a.width,d=jQuery(".cb-overlay").outerHeight(),e=jQuery(".cb-overlay").outerWidth(),f=c>b?b/c:c/b;return b>d-t.offset&&(nh=d-t.offset,nw=b>c?(d-t.offset)*f:nh/f,c=nw,b=nh),c>e-t.offset&&(nw=e-t.offset,nh=c>b?(e-t.offset)*f:nw/f,c=nw,b=nh),[parseInt(c),parseInt(b)]}function e(a){return"function"==typeof t["on"+a]?t["on"+a](v,t):void 0}function f(){jQuery(".cb-overlay, .cb-loader").css({opacity:0}).unbind("click"),setTimeout(function(){jQuery(".cb-overlay, .cb-loader").css({zIndex:-1})})}function g(a){e("Kill"),c().css({opacity:0}),setTimeout(function(){a||t.overlay.keep||f(),c().remove(),jQuery(".cb").removeClass("cb-active");var b=jQuery(".cb:last");jQuery(".cb").each(function(){b.css("zIndex")>jQuery(this).css("zIndex")&&(b=jQuery(this))}),b.addClass("cb-active");var d=e("Killed");d&&delete cb.vars.coolboxes[w]},1e3*parseFloat(cb.helpers.getProperty(c(),"duration")))}function h(a){jQuery.post(t.href,t.postvars,function(b){a.find(".cb-inner").append(b),n(a)})}function i(a){var b=new Image;b.onload=function(){var b=d(this);t.width=b[0],t.height=b[1],a.addClass("cb-is-image"),a.find(".cb-inner").append('<img class="cb-image" src="'+t.href+'" alt="'+t.title+'" width="'+b[0]+'" height="'+b[1]+'" />'),n(a)},b.src=t.href}function j(a){t.overlay.enable&&o();var b=jQuery('<div class="cb'+(t["class"]?" "+t["class"]:"")+'" data-cb="'+w+'"><div class="cb-inner"></div></div>');t.href?cb.vars.isImage.test(t.href)?i(b):h(b):n(b.find(".cb-inner").html(t.content).parent())}function k(a,b,d){a&&"center"!=a||(a=jQuery(".cb-overlay").outerWidth()/2,b=jQuery(".cb-overlay").outerHeight()/2),t.x=a-t.width/2,t.y=b-t.height/2+(d?0:jQuery(window).scrollTop()),c().css({top:t.y,left:t.x})}function l(a,b){t.width=a,t.height=b,c().css({width:a,height:b}),k()}function m(a){a=a?c().find(a):jQuery(c().children()[0]),l(a.outerWidth(),a.outerHeight())}function n(a){e("ContentLoaded"),t.title&&a.find(".cb-inner").prepend('<div class="cb-title">'+t.title+"</div>"),t.appendCloseBtn!==!1&&(a.find(".cb-inner").prepend('<a href="#" class="cb-close">'+(t.appendCloseBtn!==!0?t.appendCloseBtn:"")+"</a>"),a.find(".cb-close").bind("click",function(a){return g(),a.preventDefault()})),a.css({height:t.height,opacity:0,width:!cb.vars.isImage.test(t.href)&&t.responsive.enabled&&jQuery(".cb-overlay").outerWidth()<t.responsive.enabled?t.responsive.width:t.width,zIndex:++cb.vars.initialZIndex}),t.fixed&&a.css({position:"fixed"}),jQuery("body").append(a),k(t.x,t.y,t.fixed),setTimeout(function(){c().css({opacity:1}),jQuery(".cb-loader").css({opacity:0,zIndex:-1}),jQuery(".cb").removeClass("cb-active"),c().addClass("cb-active"),e("Complete")},1e3*parseFloat(cb.helpers.getProperty(c(),"duration")))}function o(){jQuery(".cb-overlay").css({zIndex:cb.vars.initialZIndex,opacity:t.overlay.opacity,background:t.overlay.color}),jQuery(".cb-overlay").bind("click",function(){g()}),t.loader&&jQuery(".cb-loader").css({zIndex:cb.vars.initialZIndex,opacity:t.overlay.opacity})}function p(a){if(t.group){var b,c=!1;jQuery('[data-group="'+t.group+'"]').each(function(d){if(c)return g(!0),jQuery(this).click(),!1;if("next"==a&&jQuery(this).data("cb")==w)c=!0,d>=jQuery('[data-group="'+t.group+'"]').length-1&&doAction("EndOfGroup");else if("prev"==a&&0!=d&&jQuery(this).data("cb")==w)return g(!0),b.click(),!1;b=jQuery(this)})}return!1}function q(){p("next")}function r(){p("prev")}var s={appendCloseBtn:!0,"class":"",content:"",fixed:!1,group:!1,height:300,href:!1,loader:!0,offset:50,onComplete:!1,onContentLoaded:!1,onKill:!1,onKilled:!1,overlay:{color:"#000000",enable:!0,keep:!1,opacity:.7},postvars:{},responsive:{enabled:!1,height:!1,width:"90%"},title:!1,x:!1,y:!1,width:400},t=jQuery.extend(!0,s,a),u=!1,v={box:c,isActive:u,kill:g,next:q,open:j,position:k,previous:r,resize:l,resizeToFit:m,getDefaults:function(){return s}};if(b)var w=b.data("cb");else{var w=cb.helpers.randStr();cb.vars.coolboxes[w]=v}return v};!function(a){var b=function(a,b,d){c=cb.vars.coolboxes[a.data("cb")],c[b](d)};a.fn.CoolBox=function(c,d){"object"==typeof c?d=c:d||(d={}),e=this;e.selector;switch(c){case"kill":return b(e,c,d),e;case"open":return b(e,c,d),e}return this.each(function(){if(!a(this).prop("data-cb")){var b=cb.helpers.randStr();a(this).attr("data-cb",b),a(this).bind("click",function(c){if(d.href="undefined"==typeof a(this).prop("href")||/^(\#)/.test(a(this).attr("href"))?!1:a(this).attr("href"),d.group="undefined"!=typeof a(this).data("group")?a(this).data("group"):!1,d.title="undefined"!=typeof a(this).prop("title")?a(this).prop("title"):!1,d.href&&-1!=d.href.indexOf("?")||-1!=a(this).attr("href").indexOf("?")){var e=a(this).attr("href").split("?"),e=e[1].split("&");for(u in e){var f=e[u].split("=");d[f[0]]=f[1]}}return cb.vars.coolboxes[b]=new CoolBox(d,a(this)),cb.vars.coolboxes[b].open(),c.preventDefault()})}})}}(jQuery);